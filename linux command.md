#linux常用命令


## 命令基本格式以及文件处理命令
### cd
* cd ~
* cd：进入家目录
* cd -：进入上次目录
* cd ..：进入上级目录
* cd .：进入当前目录

### ls [选项] [文件或目录]
- -a： 显示所有文件，包括隐藏文件 
- -l：显示详细信息
- -d：查看目录属性
- -h：人性化显示文件大小
- -i：显示inode

### ll
ls -l（这条命令的别名）

### pwd
查询当前目录位置

### touch 文件名
新建一个空文件

### more 文件名
分屏显示文件的内容

### chmod 755 文件
赋予文件权限

### mkdir -p [目录名]
- -p：递归创建
	
### rmdir [目录名]
只能删除空白目录

### rm -rf [文件名]
* -r：删除目录
* -f：强制删除
	
### cp [原文件或目录] [目标目录]
- -r：复制目录
- -p：连带文件属性复制
- -d：若源文件是链接文件，则复制链接属性
- -a：相当于\-pdr

### mv [原文件或目录] [目标目录] 
### ln [原文件] [目标文件]
生成链接文件
- \-s：创建软链接（创建软链接的时候，如果不在同一目录，需要使用绝对路径）

### 通配符
* *: 任意内容
* ?: 匹配任意一个字符
* []: 匹配任意一个[]中的内容
* [-]: 连字符
* [^]: 取反

### 特殊符号
* `''` 字符串, 里面的特殊字符没有特殊含义
* `""` 字符串, 里面的特殊字符有特殊含义
* `$(系统命令)` 同`` `系统命令` ``
* `$` 用于调用变量的值
* `\` 转义符号
* `#` 注释


***

	
## 压缩与解压缩
*	.zip
	### zip 压缩文件名 源文件
	压缩文件
	### zip -r 压缩文件名 源目录
	压缩目录
	### unzip 压缩文件
	解压缩.zip文件
	
*	.gz
	### gzip 源文件
	压缩为.gz格式的压缩文件，源文件会消失
	### gzip -c 文件 > 压缩文件
	压缩为.gz格式，源文件保留
	### gzip -r 目录
	压缩目录下所有的子文件，但是不能压缩目录
	### gzip -d 压缩文件
	解压缩文件
	### gunzip 压缩文件
	解压缩文件
	
*	.bz2，不能压缩目录
	### bzip2 源文件
	压缩为.bz2格式，不保留源文件（加-k保留源文件）
	### bzip2 -d 压缩文件
	解压缩（加-k保留源文件）
	### bunzip2 压缩文件
	解压缩（加-k保留源文件）
	
*   打包文件
	### tar -cvf 打包文件名 源文件
	打包 -c：打包 -v：显示过程 -f：指定到爆后的文件名
	### tar -xvf 打包文件名
	解打包 -x：解打
	### tar -tvf 打包文件名
	查看压缩包里面的文件
	### tar -zcvf 压缩包名.tar.gz 源文件..
	打包压缩
	### tar -zxvf 压缩包名.tar.gz （-C 解压到的文件目录）
	解压缩解打
	### tar -jcvf 压缩包名.tar.bz2 源文件..
	打包压缩
	### tar -jxvf 压缩包名.tar.bz2 （-C 解压到的文件目录）
	解压缩解打


---
	

## 文件搜索命令

### locate 文件名
从数据库里面按文件名去模糊搜索，搜索速度快，搜索大概一天一更新
*   /etc/updatedb.conf

	locate按照这个配置文件里的筛选规则来搜索
	* PRUNE_BIND_MOUNTS = "yes"：开启搜索限制
	* PRUNEFS: 不搜索的文件系统
	* PRUNENAMES: 不搜索的文件类型
	* PRUNEPATHS: 不搜索的路径
	
*   /var/lib/mlocate

	数据库

*   updatedb

	更新数据库
	
*   locate locate

	查找locate相关文件
	
### whereis 命令名
搜索命令以及命令文档位置，只能查系统命令
* -b：只查看命令位置
* -m：只查看帮助文档位置

### which ls
搜索命令位置，同时能查看别名
### $PATH
环境变量，里面的目录使用:分隔，定义系统搜索命令的路径
### find [搜索范围] [搜索条件]
精确搜索，若要模糊匹配，需要使用通配符
*	常用
	* find: 搜索当前目录下所有文件
	* find .: 同上
*	搜索条件(n: 文件名，若有空格，使用引号引起来)
	* -name n: 按名字
	* -iname n: 不区分大小写
	* -user n: 按用户所有者搜索
	* -nouser: 没有所有者的文件
	* -regex: 使用正则表达式搜索
	*   按时间搜索(d   +10：10天前，-10:10天内，10:10天当天)
		* -mtime d: 文件访问时间
		* -ctime d: 改变文件属性
		* -mtime d: 修改文件内容
	
	*	-size：按大小搜索(k,M)
		* -size 25k: 25k
		* -size -25k: 小于25k
		* -size +25k: 小于25k
	
	* -inum n：查找节点为n的文件

*	多条件搜索(使用下面的连接符把条件连起来)
	* -a: and，逻辑与
	* -o: 逻辑或
	
*	若要对搜索结果进行处理，在后面接
	`-exec 命令 {}\;`
	
	必须保证后面的命令能处理前面的结果，如
	* ls -a
	* rm -rf
	
###	grep [选项] 字符串 文件名
在文件中搜索符合条件的字符串，模糊匹配
*	参数(可无)
	* -v: 取反
	* -i: 忽略大小写
	
	
## 帮助命令
### man 命令名
查看命令帮助(默认打开最小登记的帮助)
*	前面的序号代表man的级别(1-9),通过man man查看各级别代表的意思
	1. 命令的帮助
	2. 可被内核调用的函数的帮助
	3. 函数和函数库的帮助
	4. 特殊文件的帮助(主要是/dev目录下的文件)
	5. 配置文件的帮助
	6. 游戏的帮助
	7. 其他杂项的帮助
	8. 系统管理员可用命令的帮助
	9. 和内核相关文件的帮助

### man -f 命令名，同whatis
查看命令有哪些帮助级别
### man 命令号 命令名
查看命令的对应命令号的帮助文件
### man -k 命令名，同apropos 命令名
查看与命令相关的命令的所有帮助
### help shell内部命令
shell内部命令 的帮助
> 使用 `whereis 命令` 不能够查到命令位置的就是shell内部命令

### info 命令
进入包含全部命令的帮助文档
* 回车: 进入子帮助页面(带有*标记)
* u: 进入上层页面
* n: 进入下一个帮助小节
* p: 进入上一个帮助小节
* q: 退出



---


## 关机和重启命令
### shutdown [选项] 时间
-c：取消前一个关机命令 -h：关机 -r：重启
* shutdown -c
* shutdown -h 00:00
* shutdown -h now

### halt，poweroff，init 0
关机（不安全）
### init 6
重启
### runlevel
查询系统的运行级别
### /etc/inittab
系统运行级别配置文件
### logout
退出


---


## 网络命令
### /etc/sysconfig/network-scripts/ifcfg-eth0
网络地址配置文件
### /etc/sysconfig/iptables
防火墙配置文件（可以指定开放哪些端口）
### service iptables restart/start/stop
重启/开启/停止防火墙服务
### chkconfig iptables on/off
防火墙开放/关闭（重启后生效）


---


## 挂载命令和卸载命令
### mount
查询系统中已挂在的目录
* /proc和/sys为内存挂载点

### mount -a
根据`/etc/fstab`文件的内容自动挂载(此目录为开机自动挂载的目录)
### mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点
重新挂载可以不加 `挂载点` 选项
*	-t 文件系统：可以为
	* `ext3`
	* `ext4`
	* `iso9660`(光盘系统)
	* `vfat`(fat32)
	
*	`-o` 特殊选项(多个间使用,分隔)
	* `remout`: 重新挂载已经挂载的文件系统，一般用于指定修改特殊权限
	* `exec/noexec`: 允许/不允许在文件系统里面执行可执行文件,默认是exec
	* `rw/ro`: 读写/只读,默认是rw
	
### 挂载光盘
1.	创建挂载点: 
	```shell
	mkdir /mnt/cdrom
	```
2.	挂载光盘:
	```shell
	mount -t iso9660 /dev/sr0 /mnt/cdrom
	```

### 挂载u盘
1. 查看u盘设备文件名: `fdisk -l`(查看系统中已经识别的硬盘)
> 系统中默认为1块硬盘(即sda), 一般来说u盘为sdb1, 若有两块硬盘，则u盘为sdc

2. 将对应的u盘设备挂载: `mount -t vfat /dev/sdb1 /mnt/useb/`

### 卸载命令
`umount 设备文件名或挂载点`




---


## 用户登录查看和用户交互命令
### w
查看系统登录信息
* USER: 登录用户名
* TTY: 登录终端
* FROM: 从哪个IP登录
* LOGIN@: 登录时间
* IDLE: 用户闲置时间
* JCPU: 指的是和该终端连接的所有进程占用的时间。这个时间不包括过去的后台作业时间，但却包括当前正在运行的后台作业所占用的时间
* PCPU: 指当前进程所占用的时间
* WHAT: 当前正在运行的命令

### who
w的简便形式，只有USER,FROM,TTY(FROM)
### last
查询当前和过去的登录的用户信息，包含
* 用户名
* 登录终端
* 登录IP
* 登录时间
* 退出时间(在线时间)

> 默认查询的是 `/var/log/wtmp` 的文件数据(为二进制数据)

### lastlog
查询所有用户的最后一次登录信息，包含
* 用户名
* 登录终端
* 登录IP
* 最后一次登录时间

> 默认查询的是 `/var/log/lastlog` 的文件数据(为二进制数据)



---


## shell编程
Linux中默认的shell为bash
* 查看当前shell `echo $SHELL`
* 查看系统支持哪些shell `vi /etc/shells`
* `sh`: 进入sh shell
* `exit`: 退出当前shell
* 在末尾加 `\` 表示后面的接前面的

### echo [选项] [输出内容]
输出内容(输出内容中!有特殊含义)
选项
* -e 按照格式输出，若无则原样输出

转义字符
* \a 输入警告音
* \b 退格键，也就是向左删除键
* \n 换行符
* \r 回车键
* \t 制表符
* \v 垂直制表符
* \0nnn 按照八进制ASCII吗表输出字符，nnn为八进制
* \xhh 按照16进制
*	`\e[1;31m 内容 \e[0m`
	* 30 黑色
	* 31 红色
	* 32 绿色
	* 33 黄色
	* 34 蓝色
	* 35 洋红
	* 36 青色
	* 37 白色
	
### shell脚本
需要以 `#!/bin/bash` 打头

\# 为注释
> 调用方式
* 相对路径方式, 如 `./hello.sh`, 需要赋予执行权限
* `bash 脚本名`, 如 `bash hello.sh`, 不需要赋予执行权限

### 命令别名
* `alias` 查看系统中已经生效的别名
* `alias 别名='命令'` 给命令设置别名(临时生效)
* `vi ~/.bashrc` 环境变量配置文件(可以通过修改这个文件永久修改别名)
* `unalias 别名` 删除别名(临时生效)

> 命令生效顺序
>
> 1. 绝对路径或相对路径执行的命令
> 2. 别名
> 3. Bash的内部命令
> 4. $PATH环境变量定义的目录查找顺序找到的第一个命令

### 常用快捷键
* `ctrl + c` 强制终止当前命令
* `ctrl + l` 清屏
* `ctrl + a` 光标移动到命令行首
* `ctrl + e` 光标移动到命令行尾
* `ctrl + u` 从光标所在位置删除到行首
* `ctrl + z` 把命令放入后台
* `ctrl + r` 在历史命令中搜索

### 历史命令
history [选项] [历史命令保存文件]
查看历史命令记录

选项
* -c: 清空历史命令
* -w: 把缓存中的历史命令保存

历史命令调用
* 上下箭头调用上一条和下一条历史命令
* `!n` 执行第n条历史命令
* `!!` 重复执行上一条命令
* `!字串` 执行最后一条以该字串开头的命令

> 历史命令默认最多保存1000条
> 历史命令保存文件为 `~/.bash_history`
> `vi /etc/profile` 修改历史命令保存条数

### 输出重定向
标准输入输出

设备 | 设备文件名 | 文件描述符 | 类型
---- | ---------- | ---------- | ----
键盘 | /dev/stdin | 0 | 标准输入
显示器 | /dev/sdtout | 1 | 标准输出
显示器 | /dev/sdterr | 2 | 标准错误输出

输出重定向(>: 覆盖 >>: 追加)
*	标准输出重定向
	* `命令 > 文件`
	* `命令 >> 文件`
*	标准错误输出重定向
	* `错误命令 2>文件`
	* `错误命令 2>>文件`
*	正确和错误输出同时保存
	* `命令 > 文件 2>&1`
	* `命令 >> 文件 2>&1`
	* `命令 &>文件`
	* `命令 &>>文件`
	* `命令 >> 文件1 2>>文件2`
	
### 输入重定向
wc [选项][文件名]

选项
* -c 统计字节数
* -w 统计单词数
* -l 统计行数
* 无则全部输出


#### `wc < 文件`, 同 `wc 文件`
统计文件内容
#### `wc << 字串`
当输入 `字串` 时候结束输入，并统计 `字串` 之前的内容

### 多命令顺序执行
* `命令1 ; 命令2` 顺序执行
* `命令1 && 命令2` 与
* `命令1 || 命令2` 或
* `命令1 | 命令2` 命令1的正确输出作为命令2的操作对象(命令2必须能操作命令1的结果)

> 命令1 && echo yes || echo no
>
> ll | more


## 字符截取命令

### grep
`grep 查找字符串 文件名`
* `-v` 取反

### cut
`cut 文件名` 取行
*`-f`: 指定列号
*`-d`: 指定分隔符

### printf
`printf [字符串格式化] 字符串` 打印

### awk
`awk '条件{动作}条件{动作}...' 文件名`
* 指定分隔符: `BEGIN{FS=":"}`
* $1-$n: 行号
* `printf $1\t$2`

### sed
`sed '动作' 文件名` 替换命令
* `-n`: 加入之后则只显示指定输出，默认整篇输出
* `-e`: 允许加入多条动作, 多个动作之间使用 ; 分隔
* `-i`: 不仅显示，而且修改文件

动作
* `a`: 追加，在当前航后添加一行或多行。 如 `2a hello world!`
* `c`: 行替换，用c后面的字符串替换原数据行。 如 `2c hello world!`
* `i`: 插入，在当期行前插入一行或多行。 如 `2i hello world!`
* `d`: 删除，删除指定行。 如 `2d` `2,4d`
* `p`: 打印。 如 `2p`
* `s`: 字串替换，用一个字符串替换另一个字符串。格式为 `行范围s/旧字串/新字串/g`


## 字符处理命令

### sort 文件名
排序命令
* `-f`: 忽略大小写
* `-n`: 以数值型进行排序，默认为字符串
* `-r`: 反向排序
* `-t`: 指定分隔符，默认为\t
* `-k n[,m]`: 按照指定的字段范围排序，n字段开始，m字段结束，默认为行尾

### wc 文件名
统计命令
* `-l`: 只统计行数
* `-w`: 只统计单词数
* `-m`: 只统计字符数

## 进程
`ps aux` 查看所有进程

## 网络操作
ssh
* `ssh-keygen`: 在 ~/.ssh 目录生成 id_rsa(私钥) 和 id_rsa.pub(公钥)
* `ssh-copy-id root@10.0.0.47`: 将公钥上传到远程主机
* `ssh -t root@10.0.0.47 '命令'`: 命令将在服务器上面执行
*	`rsync`: 同步命令
	* `rsync -r dir root@10.0.0.47:`: 将dir目录复制到远程主机的家目录, 冒号后面如果有目录则复制到相应目录
	* `rsync -av --delete mydir/ root@10.0.0.47:mydir/`: 将本地目录同步到远程目录
	* `rsync -av --delete mydir/ root@10.0.0.47:mydir/`: 将本地目录同步到远程目录，本地有删除则远程也跟着删除
	* `rsync -av --delete mydir/ root@10.0.0.47:mydir/ --dry-run`: 将本地目录同步到远程目录，本地有删除则报告信息，但远程不删除

## 软件安装
### 开源软件安装
1. `./configure`
2. `make`: 相当于 `gcc program.c -o program`
3. `make install`: 相当于 mv program /bin