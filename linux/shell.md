#Shell编程

## 变量
> 变量名=变量值

### 变量类型(默认都是字符串型)
* 字符串型
* 整型
* 浮点型
* 日期型

### 变量的分类
*	用户自定义的变量
	* 取变量的值: `$x或${x}`
	* 变量调用: `echo $x`
	*	变量叠加
		* `x=123`
		* `x="$x"456`
		* `x=${x}789`
* 环境变量: 这种变量中主要保存的是和系统操作环境相关的数据。变量可以自定义，但是对系统生效的环境变量名和变量作用是固定的
* 位置参数变量: 这种变量主要是用来向脚本当中传递参数或数据的，变量名不能自定义，变量作用是固定的
* 预定义变量: 是Bash中已经定义好的变量，变量名不能自定义，变量作用也是固定的

### 变量的设置和删除
* `set`: 查询系统下所有变量

	> 加 `-u` 选项，则调用未声明变量时会报错(默认无任何提示)
	
* `unset 变量名`: 删除变量

### 环境变量和自定义变量
* 使用 `export 变量名` 将自定义变量变为环境变量
* 也可以在赋值的同时将自定义变量变为环境变量 `export 变量名=变量值`
* 使用env查看环境变量
* 调用 `unset 变量` 删除任何变量

> 常用的环境变量(环境变量通常为大写)
* `HOSTNAME` 主机名
* `SHELL` 当前的shell
* `TERM` 终端环境
* `HISTSIZE` 历史命令条数
* `SSH_CLIENT` 当前操作环境是用ssh连接的，这里记录客户端ip
* `SSH_TTY` ssh连接的终端时pts/1
* `USER` 当前登录的用户
*	`PATH` 系统查找命令的路径
	* `PATH="$PATH":/root/sh` 增加PATH变量的值
*	`PS1` 命令提示符设置
	* `\d` 显示日期，格式为 "星期 月 日"
	* `\H` 显示完整的主机名, 如默认主机名 "localhost.localdomain"
	* `\t` 显示24小时制时间, 格式为 "HH:MM:SS"
	* `\A` 显示24小时制时间, 格式为 "HH:MM"
	* `\u` 显示当前用户名
	* `\w` 显示当前所在目录的完整名称
	* `\W` 显示当前所在目录的最后一个目录
	* `\$` 提示符。如果是root用户会显示提示符"#", 普通用户为"$"
* `PS2` 多行命令时的提示符，如在命令后面加\后

### 语系
`locale` 查询当前系统语系
* `LANG` 系统主语系的变量
* `LC_ALL` 定义正题语系的变量

#### echo $LANG
查看系统当前语系
#### locale -a | more
查看linux支持的所有语系
#### /etc/sysconfig/i18n
查询系统默认语系
> Linux中文支持，前提为正确安装中文字体和中文语系
* 如果有图形界面，可以正确支持中文显示
* 拖过使用第三方远程工具，只要语系设定正确，可以支持中文显示
* 如果使用纯字符界面，必须使用第三方查件(如zhcon等)

### 位置参数变量
执行脚本时候附带在后面的参数, 在脚本里面使用如下方式取参数
* `$n` 第n个参数(0表命令本身, 1-9表第几个参数), 10个以上的参数需要使用大括号包含, 如${10}
* `$*` 表命令行中的所有参数，为一个整体
*	`$@` 表命令行中的所有的参数，不过每个参数区分对待
```shell
for i in "$@"
	do
		echo $i
	done
```

* `$#` 表命令行中所有参数的个数

### 变量求和
`$(($x + $y))`

### 预定义变量
* `$?` 最后一次执行的命令的返回状态，若为0，则表明上一个命令正确执行，若非0(具体哪个数，由命令自己决定), 则表明上一个命令不正确执行
* `$$` 当前进程的进程号(PID)
* `$!` 后台运行的最后一个进程的进程号(PID)

	> `ps aux` 查询系统中所有运行的进程

### read [选项] [变量名]
选项
* `-p 提示信息` 等待read输入时，输出提示信息
* `-t 秒数` read命令会一直等待用户输入，使用此选项可以指定等待时间
* `-n 字符数` 限定字符数，达到后就会执行
* `-s` 隐藏输入的数据，适用于机密信息的输入

## declare [+/-][选项] 变量名
用来声明变量类型

选项
* `-` 给变量设定类型属性
* `+` 取消变量的类型属性
* `-a` 将变量声明为数组型
* `-i` 整数型
* `-x` 环境变量
* `-r` 只读变量(不能删除，甚至不能操作)
* `-p` 显示指定变量的被声明类型(不加变量名，会查询所有变量的)

	> 如 `declare -i cc=$a+$b`

### 数组
定义数组(有[]时候，加不加-a无所谓)
* `movie[0]=zp`
* `movie[1]=tp`
* `declare -a movie[2]=live`
查看数组
* `echo ${movie}` 调用数组第一个值
* `echo ${movie[0]}` 调用数组指定下标值
* `echo ${movie[*]}` 输出数组全部值，使用空格分隔

### 数值运算方法
* `$(expr $a + $b)` +两边需要有空格
*	`$((运算式))` 或 `$[运算式]`
	* `c=$(($a+$b))`
	* `$[$a+$b]`
	
### 变量的测试